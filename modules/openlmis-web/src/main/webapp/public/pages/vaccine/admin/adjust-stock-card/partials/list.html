<style>
    .red {
        color: red;
    }
    .blue {
        color: steelblue;
    }
    .odd {
        color: red;
    }
    .even {
        color: blue;
    }
    .striped {
        color:white;
        background-color:grey;
    }
</style>
<div xmlns="http://www.w3.org/1999/html">
    <h2><span>Adjust Stock Card</span>
    </h2>

    <div class="alert alert-success" id="saveSuccessMsgDiv" ng-show="id">
        <span ng-bind="message"></span>
    </div>

    <div class="alert alert-error" id="equipmentSaveFailMessage" openlmis-message="equipmentErrorMessage"
         ng-show="equipmentError">

    </div>


    <div id="searchControl" class="row-fluid">
        <div class="span5 search-in-category">
            <div class="input-append input-prepend">

                <input  placeholder="Enter Store Name" id='searchFacility' type="text" class="span5" ng-model="query" maxlength="50"
                       ng-keydown="triggerSearch($event)" autocomplete="off"/>
                <button class="btn" ng-click="searchFacility()"  data-toggle="collapse"  data-target="#demo">
                    <i id='searchIcon' class="icon-search"></i>
                </button>
            </div>
        </div>


<!--
        <div class="row" ng-show="facilities.length > 0">
            <table class="table table-striped">
                <thead>
                <tr>
                    <th>Facility Name</th>

                </tr>
                </thead>
                <tbody ng-repeat="facility in facilities">
                <tr>
                    <td>{{facility.name}}</td>

                </tr>
                </tbody>

            </table>

        </div>
-->

    </div>
    <div class="row-fluid">
        <div class="span6">
            <div id="demo" class="collapse">
                <div ng-show="facilities.length == 0">No Facility</div>
                <div ng-show="facilities.length > 0">

                    <table class="table table-bordered table-striped">
                        <thead>
                        <tr>
                            <th>Select Store</th>

                        </tr>
                        </thead>
                        <tbody ng-repeat="facility in facilities">
                        <tr>
                            <td>{{facility.name}}</td>
                            <td> <button class="btn primary pull-right" ng-click="searchStock(facility)" >
                                Search Stock
                            </button> </td>

                        </tr>
                        </tbody>

                    </table>

                </div>


            </div>



        </div>
        <div class="span6"></div>
    </div>





    <!--   <input id="txtFilterDonors" class="search-query input-xlarge" type="text" ng-model="query"
              placeholder="Enter Store Name (DVS/RVS)"/>

       <span>


           <a href="#/create" class="btn btn-primary"><span id="resignation-add-new"
                                                                       openlmis-message="button.add.new"></span></a>


       </span>-->

    <div class="clearfix"></div>
    <br>
    <div ng-show="stockCards.length == 0"></div>
    <div ng-show="stockCards.length > 0">
        <table class="table table-striped table-bordered">
            <thead>
            <tr class="gradient-header">
<!--
                <th class="col-row-number">#</th>
-->
                <th class="col-row-number"><span>Product Code</span></th>
                <th class="span1"><span class="regimen-heading">Product</span></th>
                <th class="span1"><span class="regimen-heading">Batch</span></th>
                <th class="span1"><span class="regimen-heading">Quantity Per Batch</span></th>
                <th class="span1"><span class="regimen-heading">Total Quantity On Hand</span></th>
                <th class="span1"><span class="regimen-heading">Action</span></th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat-start="c in stockCards"  ng-class-odd="'striped'"
                ng-init="$index%2==0?(color='odd'): (color='even')">

            <tr ng-repeat-start="card in c.lotsOnHand">
<!--
                <td>{{$index + 1}}</td>
-->
                <td class="col-product" ng-if="$index == 0" rowspan="{{c.lotsOnHand.length * 2}}"><a href="" ng-click="editLot(card.id)">{{c.product.code}}</a></td>
                <td class="col-product" ng-if="$index == 0" rowspan="{{c.lotsOnHand.length * 2}}"
                    class="col-product last-row disabled padding2px ">
                    <span ng-bind="c.product.primaryName" class="padding2px"></span>
                </td>
                <td class="col-product  ">{{card.lot.lotCode}}</td>
                <td class="col-product ">{{card.quantityOnHand | number}}</td>
                <td class="col-product" style="text-align: center" ng-class="changeColor(getTotalRange(c.lotsOnHand,c.totalQuantityOnHand))" ng-if="$index == 0" rowspan="{{c.lotsOnHand.length * 2}}">{{c.totalQuantityOnHand | number}}</td>
                <td class="col-product"  ng-if="$index == 0" rowspan="{{c.lotsOnHand.length * 2}}" >
                    <span ng-show="getTotalRange(c.lotsOnHand,c.totalQuantityOnHand)">

                          <button  class="btn primary pull-right"  ng-click="updateStockOnHand(c)" >
                        update Stock
                    </button>

                    </span>


                </td>

            </tr>
            <tr ng-repeat-end=""></tr>
            <tr ng-repeat-end=""></tr>

            </tbody>
        </table>

    </div>

</div>