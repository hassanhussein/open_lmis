<!--
  ~ Electronic Logistics Management Information System (eLMIS) is a supply chain management system for health commodities in a developing country setting.
  ~
  ~ Copyright (C) 2015  John Snow, Inc (JSI). This program was produced for the U.S. Agency for International Development (USAID). It was prepared under the USAID | DELIVER PROJECT, Task Order 4.
  ~
  ~ This program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->


<style>


    #report-head {
        margin-top: -28px !important;
    }

    .container-fluid {
        padding-right: 0px !important;
        padding-left: 0px !important;
    }
    .button{
        color: #078f97 !important;
    }
    btn-checkbox{
        visibility: visible !important;
        color: #0c9083;
    }

   /* .table td {
         padding: 1px !important;
    }*/
</style>

<div class="alert alert-success" id="saveSuccessMsgDiv" ng-bind="message" ng-show="message"></div>

<div class="container-fluid">
    <div class="box row-fluid" style="padding:0px;">
        <div class="box-header" id="report-head">
            <h2>
                <span>Quantification Extract Report for {{facilityName}} - {{facilityCode}}</span>
            </h2>
            <div class="box-icon">
                <a id="pdf-button" ng-show="filterForm.$valid" href="" ng-click="exportReport('PDF')"
                   class='btn-small btn-info'><span openlmis-message="label.pdf"></span></a>
                <a id="xls-button" ng-show="filterForm.$valid" href="" ng-click="exportReport('XLS')"
                   class='btn-small btn-info'><span openlmis-message="label.excel"></span></a>
            </div>
        </div>


        <div class="row-fluid">
            <!--  <div class="row">
                <div class="col s12"></div>
                <div class="card">
                  <div class="card-content">
                    This is some text within a card body.
                  </div>
                </div>

              </div>-->
            <div class="sidebar">
                <div class="app-form" style="padding: 5px;">
                    <form ng-submit="filterGrid()" name="filterForm" novalidate>
                        <div filter-container class="clearfix">
                            <program-facility-filter class="form-cell horizontalFilters" required="true"></program-facility-filter>
                            <year-facility-filter class="form-cell horizontalFilters" required="true"></year-facility-filter>
                            <period-multi-filter class="form-cell horizontalFilters" required="true"></period-multi-filter>
                            <div class="clearfix padding2px"></div>


                            <div class="clearfix padding2px"></div>
                            <div>
    <span class="pull-right"><a ng-click="searchQuantificationReport()" class="waves-effect waves-light btn">Search</a>
 </span></div>

                        </div>
                    </form>
                </div>
            </div>
            <div class="content-body">

                <table client-side-sort-pagination class="table table-bordered"
                       ng-show="datarows == undefined || datarows.length == 0">
                    <tr>
                        <td>No data to show under selected filters</td>
                    </tr>
                </table>


                <div ng-show="datarows.length > 0" client-side-sort-pagination>
                    <div class="pull-right legend">Page: {{currentPage}}, Showing records {{ countFactor + 1 }} to {{ countFactor + pageSize }} of
                        {{totalItems}}
                        <br/>
                    </div>

                    <table ng-show="datarows.length > 0" class="table-bordered table table-striped pull-right"
                           ng-table="">

                        <tbody>
                        <tr ng-class="{'consumption-parent' : toggel}" ng-repeat="row in datarows">
                            <td data-title="'#'" class="number" style="width:20px">{{ row.no  + countFactor}}</td>
<!--                            <td data-title="getLocalMessage('label.facility.code')"-->
<!--                                ng-class="{'consumption-parent' : toggel}" style="width:100px" sortable="facilityCode">{{row.facilityCode }}-->
<!--                            </td>-->
<!--                            <td data-title="getLocalMessage('label.facility.name')" ng-class="{'consumption-parent' : toggel}" style="width:100px" sortable="facility">{{row.facility }}-->
<!--                            </td>-->
<!--                            <td data-title="getLocalMessage('label.facility.type')"-->
<!--                                ng-class="{'consumption-parent' : toggel}" style="width:100px" sortable="facilityType">{{-->
<!--                                row.facilityType }}-->
<!--                            </td>-->
                            <td data-title="getLocalMessage('label.period.name')" ng-class="{'consumption-parent' : toggel}"
                                style="width:60px" sortable="periodName">{{ row.periodName }}
                            </td>
                            <td data-title="getLocalMessage('label.product.code')"
                                ng-class="{'consumption-parent' : toggel}" style="width:100px" sortable="code">{{ row.code
                                }}
                            </td>
                            <td data-title="getLocalMessage('label.product.name')"
                                ng-class="{'consumption-parent' : toggel}" style="width:40px" sortable="product">{{
                                row.product }}
                            </td>
                            <td data-title="getLocalMessage('label.unit')" ng-class="{'consumption-parent' : toggel}"
                                style="width:40px" sortable="product">{{ row.unit }}
                            </td>
                            <td data-title="getLocalMessage('header.unit.of.measure')"
                                ng-class="{'consumption-parent' : toggel}" style="width:30px" sortable="uom">{{ row.uom |
                                number }}
                            </td>
                            <td data-title="getLocalMessage('label.consumption.in.small.unit')"
                                ng-class="{'consumption-parent' : toggel}" class="number" style="width:50px"
                                sortable="issues">{{ row.issues | number }}
                            </td>
                            <td data-title="getLocalMessage('label.consumption.per.pack')"
                                ng-class="{'consumption-parent' : toggel}" class="number" style="width:50px"
                                sortable="consumption">{{ row.consumption | number }}
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <select ui-select2 class="pull-left" ng-model="pageSize" ng-change="searchQuantificationReport()">
                        <option value="10">10 per page</option>
                        <option value="20">20 per page</option>
                        <option value="50">50 per page</option>
                        <option value="100">100 per page</option>
                    </select>


                    <pagination total-items="totalItems" page="currentPage" max-size="10"
                                items-per-page="pagination.limit"
                                direction-links="false" class="pagination-sm"></pagination>
                    <div class="clearfix"></div>
                    <div ng-show="datarows.length > 0" class="box">
                        <div class="box-content">
                            <span openlmis-message="report.message.aggregate.consumption"></span>
                        </div>
                    </div>

                </div>

            </div>


        </div>
    </div>
</div>
