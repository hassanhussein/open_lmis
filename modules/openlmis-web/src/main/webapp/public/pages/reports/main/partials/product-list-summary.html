<!--
~ Electronic Logistics Management Information System (eLMIS) is a supply chain management system for health commodities in a developing country setting.
~
~ Copyright (C) 2015  John Snow, Inc (JSI). This program was produced for the U.S. Agency for International Development (USAID). It was prepared under the USAID | DELIVER PROJECT, Task Order 4.
~
~ This program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.
~
~ This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for more details.
~
~ You should have received a copy of the GNU Affero General Public License along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

<div class="alert alert-success" id="saveSuccessMsgDiv" ng-bind="message" ng-show="message"></div>
<div class="row-fluid sortable ui-sortable">
    <div class="box span12">
        <div class="box-header">
            <h2>
                <h2>Product List<span class="break"></span></h2>
            </h2>
            <div class="box-icon">
                <a id="printButton" style="background-color:#4897BA !important;"
                   id="xls-button" href="" export export-data="data"
                   export-keys="['productCode','alternateItemCode','productName','category','productForm','packSize', 'dispensingUnit', 'tracer', 'fullSupply']"
                   export-headers="['Product Code','Product Alternate Code','Product Name','Category','Form', 'Pack Size', 'Dispensing Uit', 'Tracer', 'FullSupply']"
                   class="btn-small btn-primary"
                   target="_blank">Export</a>
            </div>
        </div>
        <div class="row-fluid">
            <div class="sidebar">
                <div class="app-form" style="padding: 5px;">
                    <div>
                        <label for="status" class="labels" openlmis-message="label.status"></label>
                        <div>
                            <select id="status" ui-select2 class="input-large" ng-model="filter.status">
                                <option value="" selected="selected"> All </option>
                                <option  ng-repeat="status in statuses" value="{{ status.value }}" ng-selected="status.value == filter.status">{{status.name}}</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label for="programs" class="labels" openlmis-message="label.programs"></label>
                        <div>
                            <select id="programs" ui-select2 class="input-large" ng-model="filter.programs" >
                                <option value="" selected="selected"> All </option>
                                <option ng-repeat="programs in programs" value="{{ programs }}" ng-selected="programs == filter.programs">{{programs}}</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label for="facilityType" class="labels" openlmis-message="label.facility.level"></label>
                        <div>
                            <select id="facilityType" ui-select2 class="input-large" ng-model="filter.facilityType" >
                                <option value="" selected="selected"> All </option>
                                <option ng-repeat="facilityType in facilityType" value="{{ facilityType }}" ng-selected="facilityType == filter.facilityType">{{facilityType}}</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label for="category" class="labels" openlmis-message="label.category"></label>
                        <div>
                            <select id="category" ui-select2 class="input-large" ng-model="filter.category" >
                                <option value="" selected="selected"> All </option>
                                <option ng-repeat="category in category" value="{{ category }}" ng-selected="category == filter.category">{{category}}</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label for="tracer" class="labels" openlmis-message="label.product.tracer"></label>
                        <div>
                            <select id="tracer" ui-select2 class="input-large" ng-model="filter.tracer">
                                <option value="" selected="selected"> All </option>
                                <option  ng-repeat="tracer in tracer" value="{{ tracer.value }}" ng-selected="tracer.value == filter.tracer">{{tracer.name}}</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label for="fullSupply" class="labels" openlmis-message="label.product.fullSupply"></label>
                        <div>
                            <select id="fullSupply" ui-select2 class="input-large" ng-model="filter.fullSupply">
                                <option value="" selected="selected"> All </option>
                                <option  ng-repeat="fullSupply in fullSupply" value="{{ fullSupply.value }}" ng-selected="fullSupply.value == filter.fullSupply">{{fullSupply.name}}</option>
                            </select>
                        </div>
                    </div>
                    </br>
                    <div>
                        <span class="pull-right"><a ng-click="filterFacilities()" class="waves-effect waves-light btn">Filter</a>
                    </div>
                </div>
            </div>
            <div class="content-body col-lg-6" >
                <div>
                    <label class="labels"><h3>Total Products : {{totalProducts || 0}}</h3></label>
                </div>
                <table client-side-sort-pagination class="table table-bordered "
                       ng-show="data == undefined || data.length == 0">
                    <tr>
                        <td>No data to show under selected filters</td>
                    </tr>
                </table>
                <div ng-show="datarows.length > 0" >
                    <div ng-if="datarows.length > 0" top-right-table-summary></div>
                        <table ng-show="datarows.length > 0" class="table table-bordered table-responsive"
                       ng-table="tableParams" >
                    <tbody>
                    <tr ng-repeat="row in datarows">
                        <td data-title="index">{{$index + 1}} </td>
                        <td data-title="getLocalMessage('label.product.code')"  sortable="productCode">
                            {{
                            row.productCode}}
                        </td>
                        <td data-title="getLocalMessage('label.product.alternate.code')"  sortable="alternateItemCode">
                            {{
                            row.alternateItemCode}}
                        </td>
                        <td data-title="getLocalMessage('label.product.name')"  sortable="productName">
                            {{
                            row.productName}}
                        </td>
                        <td data-title="getLocalMessage('label.product.category')"  sortable="category">
                            {{
                            row.category}}
                        </td>
                        <td data-title="getLocalMessage('label.product.form')"  sortable="productForm">
                            {{
                            row.productForm}}
                        </td>
                        <td data-title="getLocalMessage('label.product.packSize')"  sortable="packSize">
                            {{
                            row.packSize}}
                        </td>
                        <td data-title="getLocalMessage('label.product.dispensingUnit')"  sortable="dispensingUnit">
                            {{
                            row.dispensingUnit}}
                        </td>
                        <td data-title="getLocalMessage('label.product.tracer')"  sortable="tracer">
                            {{
                            row.tracer}}
                        </td>
                        <td data-title="getLocalMessage('label.product.fullSupply')"  sortable="fullSupply">
                            {{
                            row.fullSupply}}
                        </td>
<!--                        <td data-title="'Maximum Months of Stock'"  sortable="maxMonthsOfStock">-->
<!--                            {{-->
<!--                            row.maxMonthsOfStock | number }}-->
<!--                        </td>-->

<!--                        <td data-title="'Min Months Of Stock'"  sortable="minMonthsOfStock">-->
<!--                            {{-->
<!--                            row.minMonthsOfStock  }}-->
<!--                        </td>-->
<!--                        <td data-title="'Emergency Order Point'"  sortable="eop">-->
<!--                            {{-->
<!--                            row.eop | number}}-->
<!--                        </td>-->
                    </tr>
                    </tbody>
                </table>
                </div>
            </div>
            </div>
        </div>
    </div>
</div>

<style>
    .sub-report {
        background-color: #d9d9d9;
    }

    .sub-report table {
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
    }

    .sub-report table tr td {
        background-color: #f9f9f9;
    }

    .sub-report
</style>

