<!--
  ~ This program is part of the OpenLMIS logistics management information system platform software.
  ~ Copyright Â© 2013 VillageReach
  ~
  ~  This program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.
  ~
  ~  This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for more details.
  ~  You should have received a copy of the GNU Affero General Public License along with this program.  If not, see http://www.gnu.org/licenses.  For additional information contact info@OpenLMIS.org.
  -->

<div xmlns="http://www.w3.org/1999/html" tab-scroll>
    <div ng-hide="location.id"><h2 id="addLocationHeader">Add New Warehouse</h2></div>
    <div ng-show="location.id"><h2 id="editLocationHeader" openlmis-message="header.location.edit"></h2></div>

    <form ng-submit="saveGeoZone()" name="locationForm" novalidate>
        <div class="app-form">



            <ul class="nav nav-tabs">
                <li class="active"><a href="#tab1" data-toggle="tab" target="_self">Details</a></li>
                <li><a href="#tab2" data-toggle="tab" target="_self">Bin Location</a></li>

            </ul>


            <div class="tab-content">
                <div class="tab-pane active" id="tab1">

                    <div id="locationFormGroup" class="form-group clear-top">

                        <div class="form-row clearfix">


                            <div class="form-cell">
                                <label id="locationTypeLabel">
                                    <span >Site</span>
                                    <span class="label-required"> *</span>
                                </label>

                                <div class="form-field">
                                    <select id="locationType" name="locationType" ng-model="location.locationType.id"
                                            ng-options="type.id as type.name for type in types"
                                            ng-required="true">
                                        <option value="">Select Site</option>
                                    </select>
                                    <span class="field-error" ng-show="locationForm.locationType.$error.required && showError"
                                          openlmis-message="select.value"></span>
                                </div>
                            </div>


                            <div class="form-cell">
                                <span openlmis-message="header.active"></span>
                                <div class="form-field">
                                    <input id="active" ng-model="location.active" type="checkbox" name="active"
                                           ng-required="false" ng-checked = "true"/>
                                </div>
                            </div>
                        </div>

                        <div class="form-row clearfix">
                            <div class="form-cell">
                                <label id="codeLabel" for="code">
                                    <span openlmis-message="header.code"></span>
                                    <span class="label-required"> *</span>
                                </label>

                                <div class="form-field">
                                    <input ng-model="location.code" name="code" id="code" type="text" maxlength="50" ng-required="true"/>
                                    <span class="field-error" ng-show="locationForm.code.$error.required && showError"
                                          openlmis-message="missing.value"></span>
                                </div>
                            </div>

                            <div class="form-cell">
                                <label id="nameLabel" for="name">
                                    <span openlmis-message="header.name"></span>
                                    <span class="label-required"> *</span>
                                </label>

                                <div class="form-field">
                                    <input ng-model="location.name" name="name" id="name" type="text" maxlength="50" ng-required="true"/>
                                    <span class="field-error" ng-show="locationForm.name.$error.required && showError"
                                          openlmis-message="missing.value"></span>
                                </div>
                            </div>


                        </div>


                    </div>
                </div>
                <div class="tab-pane" id="tab2">

<!--                    <div id="searchControl" class="row-fluid">-->
<!--                        <div class="span5 search-in-category">-->
<!--                            <div class="input-append input-prepend">-->

<!--                                <input id='searchLocation' type="file" class="span5" ng-model="query"/>-->
<!--                                <button class="btn btn-danger" ng-click="search(1)">-->
<!--                                    Upload-->
<!--                                </button>-->
<!--                            </div>-->
<!--                        </div>-->

<!--                    </div>-->


                    <div class="table-container">
                        <table name="searchResultTable" class="table table-striped table-bordered search-list" ng-show="showResults">
                            <thead>
                            <tr class="gradient-header resultCountHeader">
                                <th colspan="7">
            <span ng-switch on="totalItems">
            <h3 id="noResultMessage" ng-switch-when="0" openlmis-message="msg.no.matches|searchedQuery"></h3>
            <h3 id="oneResultMessage" ng-switch-when="1" openlmis-message="msg.one.match|searchedQuery"></h3>
            <h3 id="nResultsMessage" ng-switch-default
                openlmis-message="msg.many.matches|totalItems|searchedQuery"></h3>
              </span>
                                    <a id="closeButton" class="close-btn" href="" ng-click="clearSearch()" tabindex="-1"></a>
                                </th>
                            </tr>
                            <tr class="gradient-header" ng-show="locationList.length">
                                <th id="codeHeader" openlmis-message="header.location.code"> Bin Code</th>
                                <th id="nameHeader" openlmis-message="header.location.name"> Active</th>
                                <th id="levelHeader" openlmis-message="header.location.type"> Type</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="location in locationList">
                                <td id="locationCode{{$index}}" ng-bind="location.code"></td>
                                <td id="locationName{{$index}}" ng-bind="location.name"></td>
                                <td id="locationTypeName{{$index}}" ng-bind="location.locationType.name"></td>

                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <pagination total-items="totalItems" page="currentPage" max-size="5" items-per-page="pagination.limit"
                                direction-links="false" ng-show="locationList.length" class="pagination-sm"></pagination>
                </div>



                </div>
            </div>


            <div form-toolbar id="action_buttons" class="action-buttons">
                <div class="form-cell button-row">
                    <input id="saveButton" type="submit" class="btn btn-primary save-button"
                           openlmis-message="button.save" ng-click="save()"/>
                    <input id="cancelButton" type="button" class="btn btn-cancel cancel-button" openlmis-message="button.cancel"
                           ng-click="cancel()"/>
                </div>

                <div class="toolbar-error" id="saveErrorMsgDiv" openlmis-message="error" ng-show="error"></div>
            </div>

        </div>
    </form>

</div>


